{"_id":"_design/by_date_and_adjusted","_rev":"7-02ed7ae9802ad4c1638aab1f9eb9ef99","views":{"all":{"map":"function (doc) {\n    if (doc.timestamp) {\n        var date = new Date(doc.timestamp);\n        var total = 0.0;\n        for (currency in doc) {\n            if (typeof(doc[currency]) != \"string\" ) {\n                for (exchange in doc[currency]) {\n                    total += doc[currency][exchange]['amount'] * doc[currency][exchange]['bid'];\n                }\n            }\n        }\n        emit([date.getFullYear(), date.getMonth() + 1, date.getDate(), doc.adjusted], total);\n    }\n}"}},"language":"javascript"}